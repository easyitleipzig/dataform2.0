<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Expires" content="Fri, Jan 01 1900 00:00:00 GMT">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="Lang" content="en">
	<meta name="author" content="">
	<meta http-equiv="Reply-to" content="@.com">
	<meta name="generator" content="PhpED 8.0">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="creation-date" content="09/06/2012">
	<meta name="revisit-after" content="15 days">
	<title>Untitled</title>
</head>
<body>
<div id="df"></div>
<script>
const DIV_UPLOAD_HTML = '<div id="tmpUploadId" class="divUploadFile"><div id="tmpDivUploadFormErrorText" class="fileUploadErrorText">Datei auswählen und "Öffnen" wählen.</div><label id="tmpLabelUpload" class="fileUploadLabel">Hochladen</label><input type="file" id="tmpFileUploadFile"></div>';
async function uploadFieldFile( path, el, fileName ) {
    let formData = new FormData();
    let d = new Date();
    formData.append("file", el );
    await fetch( path , {
      method: "POST", 
      body: formData
    })
  .then( data => { 
	  	myDia.hide();
	  	dLA.hide();
	  	if( appendixType == "new" ) {
	  		nj( "#newInnerUrl" ).v( "library/documents/" + tmpFileName );
			nj( "#newImgFileAppendix" ).atr("src", "library/css/icons/AppOkay.png");
	  	} else {
	  		nj( "#editInnerUrl" ).v( "library/documents/" + tmpFileName );
    		nj( "#editImgFileAppendix" ).atr("src", "library/css/icons/AppOkay.png");
	  	}
  } )
  .catch( data => { 
  	console.log(data);
  	})   
}
const handleFileUpload = function (evt) {
    let files = evt.target.files; // FileList object
    // files is a FileList of File objects. List some properties.
    for (var i = 0, f; f = files[i]; i++) {
        if( f.size > MAX_FILESIZE_APENDIX ) {
        
        } else {
            uploadFieldFile( "library/php/upload_calendar_apendix.php", document.getElementById( "loadAppendix" ).files[0], appendixType, nj("#editId").v() );
        }
    }
}
	

</script>
<script src="library/javascript/no_jquery.js"></script>
<script src="library/javascript/easyit_helper_neu.js"></script>
<script src="library/javascript/main.js"></script>

<script src="library/javascript/menu_calendar.js"></script>
<script src="library/javascript/Field.js"></script>
<script src="library/javascript/DropResize.js"></script>
<script src="library/javascript/DialogDR.js"></script>
<script src="library/javascript/MessageDR.js"></script>
<script>
let tmpFields = [];
var f1 = new Field( { 
	id: "sel", 
	dVar: "f1", 
	type: "select", 
	index: 0, 
	addClass: "cField cMini", 
	addPraefix: "f1",
	value: "0,2", 
	attributes: "multiple", 
	options: "<option value=0></option><option value=1>v1</option><option value=2>v2</option>", 
	widthLabel: true, 
	widthDiv: true, 
	onFocus: function() {
		console.log( this );	
	}, 
	onDblClick: function( args ) {
		console.log( this );	
	},
	onChange: function( args ) {
		console.log( nj( this ).gSV() );	
	},
	valid: ["not 0", "not empty"] 
} );
var f2 = new Field( { 
	id: "txtVal", 
	dVar: "f2", 
	type: "input_text", 
	index: 0, 
	value: "1", 
	options: "<option value=0></option><option value=1>v1</option><option value=2>v2</option>", 
	addPraefix: "f2", 
	widthLabel: true,
	valid: ["not 0", "not empty"],
	options: '<option value="Chocolate"></option><option value="Coconut"></option><option value="Mint"></option><option value="Strawberry"></option><option value="Vanilla"></option>', 
	onBlur: function( e) {
		nj( e.target ).Dia().checkValidity();	
	}
} );
var f3 = new Field( { 
	id: "fileVal", 
	dVar: "f3", 
	type: "input_file", 
	index: 0, 
	value: "", 
	addPraefix: "f3", 
	widthLabel: true,
	widthDiv: true,
	onChange: function() {
		console.log( this );
	}
} );
var f4 = new Field( { 
	id: "dateVal", 
	dVar: "f4", 
	type: "input_date", 
	index: 0, 
	value: "0000-00-00", 
	addPraefix: "f4", 
	widthLabel: true,
	widthDiv: true,
} );
var f5 = new Field( { 
	id: "chkVal", 
	dVar: "f5", 
	type: "checkbox", 
	index: 0, 
	value: false, 
	addPraefix: "f5", 
	widthLabel: true,
	widthDiv: true,
} );
var f6 = new Field( { 
	id: "buttonVal", 
	dVar: "f6", 
	type: "button", 
	index: 0, 
	//value: "test", 
	value: "<img src='library/css/icons/AppEmpty.png'>", 
	addPraefix: "f6", 
	widthLabel: true,
	widthDiv: true,
} );
var f7 = new Field( { 
	id: "recPointerVal", 
	dVar: "f7", 
	type: "button", 
	index: 0,
	value: "&nbsp;", 
	addPraefix: "f7", 
	widthLabel: true,
	widthDiv: true,
	addClass: "cButtonMiddle",
	onClick: function() {
		let res = {}
		if( nj( this ).htm()  === "&nbsp;" ) {
			nj( this ).htm( "<img src='library/css/icons/cTriangleRightBlack.png'>" );
			res.active = true;
		} else {
			nj( this ).htm( "&nbsp;" ); 
			res.active = false;
		}
		res.id = this.id;
		f7.setRecordPointer( res );
	}
} );
var f8 = new Field( { 
	id: "imgVal", 
	dVar: "f8", 
	type: "img", 
	index: 0,
	value: "test", 
	addPraefix: "f8", 
	widthLabel: true,
	widthDiv: true,
	addClass: "cImageMiddle",
	onClick: function() {
		let res = {}
		res.id = this.id;
		nj( this ).Dia().setRecordPointer( res );
	}
} );
tmpFields.push( f1.getField() );
tmpFields.push( f2.getField() );
tmpFields.push( f3.getField() );
tmpFields.push( f4.getField() );
tmpFields.push( f5.getField() );
tmpFields.push( f6.getField() );
tmpFields.push( f7.getField() );
tmpFields.push( f8.getField() );
let l = tmpFields.length;

let i = 0;
while ( i < l ) {
	let m = tmpFields[i].length;
	let j = 0;
	while ( j < m ) {
		nj().els( "#df" ).appendChild( tmpFields[i][j] );
		j += 1;
	}
	i += 1;
}
var uploadDiv = new DialogDR( { dVar: "uploadDiv", title: "Datei laden", innerHTML: DIV_UPLOAD_HTML } );           

</script>
</body>
</html>
